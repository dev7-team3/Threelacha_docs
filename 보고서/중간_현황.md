# 중간 발표
<div align="right"> 📅 2025-12-26 </div>

> 💡 요약 <br><br>
> 프로젝트 중간 발표로 멘토님께 현황을 공유하고 이에 대한 피드백을 받기 위해 진행됨<br>
>- 로컬 파이프라인의 구축이 완료<br>
>- 클라우드 파이프라인의 변환의 진행중 <br>
>- streamlit 대시보드 (데이터 연결, 레이아웃 생성, 유통업체별 그래프)

## 데이터 파이프라인 구성도

### 1. 로컬 파이프라인 구성

<img width="720" height="345" alt="Image" src="https://github.com/user-attachments/assets/b7cb224e-f4c7-423a-b95c-946a5828f0f9" />

- 객체 스토리지 :  Minio → S3 <br>
<img width="1035" height="392" alt="minio_storage" src="https://github.com/user-attachments/assets/ec3535e3-11b3-4101-bbe1-073cdfe5388a" />
    
- 데이터 카탈로그 : hive catalog → glue catalog
- 쿼리 엔진 : trino → Athena
    <details>
    <summary>Trino_testing</summary>
    <div markdown="1">

    <img width="702" height="623" alt="trino_testing" src="https://github.com/user-attachments/assets/5ca03ea6-8544-4331-87a2-00135382fa8b" />

    </div>
    </details>
        
        
- 로컬환경에서의 대시보드<br>
    <img width="1000" alt="Image" src="https://github.com/user-attachments/assets/99385ec2-4bd8-4542-893b-a25f3eae8fc9" />
    

### 2. 클라우드 파이프라인 구성

- 로컬 파이프라인에서 클라우드 파이프라인으로 변환 진행중

<img width="1124" height="628" alt="cloud_pipeline" src="https://github.com/user-attachments/assets/c56a80ef-17ef-4292-889b-c53fae3a93fa" />

1. EC2 + lambda + eventbridge로 9시에 자동으로 airflow docker 올리도록 구성 ✅
2. Minio 데이터 backfill은 그대로 S3에 적재 ✅
3. Batch로 가져오는 데이터들은 airflow를 이용해 S3에 적재 ✅
4. Glue Catalog 생성 (Hive 메타스토어의 전환) ✅
5. glue datacatalog-athena 연동 확인 ✅
6. Athena(Trino의 전환)와 DBT 연결 진행중 
7. RDS로의 데이터 이동
8. Streamlit의 로컬 환경 도커로 전환
9. CI/CD 추가

## Airflow DAGs

- data collect
<img width="925" height="436" alt="data_collect_dags" src="https://github.com/user-attachments/assets/cd409c87-2834-464f-b2d0-ad63fc00c79e" />
- data transform (json to parquet 변환) + trigger를 이용해 collect DAGs 연결
<img width="929" height="329" alt="data_transform_dag" src="https://github.com/user-attachments/assets/90016f19-b3dd-46a5-bd33-46ec88a37c81" />
    
- data catalog schema 생성 (1회성)
<img width="918" height="428" alt="data_catalog_dags" src="https://github.com/user-attachments/assets/4ecd9638-b426-47fc-b80b-6d33f34c1db7" />

- dbt : 모든 dbt를 한번에 진행
<img width="914" height="128" alt="dbt_dags" src="https://github.com/user-attachments/assets/6c07ea79-354e-4a0f-8bcd-3e858af8bcdd" />
    
- testing을 위한 DAGs
<img width="913" height="251" alt="testing_dags" src="https://github.com/user-attachments/assets/ed136dd5-e642-49d6-925a-24acb1fa03aa" />